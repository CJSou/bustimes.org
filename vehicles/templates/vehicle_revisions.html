{% load humanize %}

<ul class="revisions-list">
    {% for revision in revisions %}
        <li id="revision-{{ revision.id }}">
            <p>
                {% if not vehicle %}
                    <a href="{{ revision.vehicle.get_absolute_url }}">{{ revision.vehicle }}</a> &bull;
                {% endif %}
                {{ revision.created_at|naturaltime }}
                {% if not by_user %}
                    {% if revision.user %}
                        &bull; <a href="{{ revision.user.get_absolute_url }}">{{ revision.user }}</a>
                    {% endif %}
                {% endif %}
                {% if request.user.is_superuser %}
                    &bull; <a href="{% url 'admin:vehicles_vehiclerevision_change' revision.pk %}">‚úé</a>
                {% endif %}
            <p>
                {% for key, from, to in revision.list_changes %}
                    <strong>{{ key }}</strong>
                    {% if from %}
                        from {{ from }}
                    {% endif %}
                    {% if to %}
                        to
                        {{ to }}
                    {% endif %}
                    <br>
                {% endfor %}
                {% for feature in revision.vehiclerevisionfeature_set.all %}
                    {{ feature }}
                {% endfor %}
                {% if revision.message %}
                    <p class="wrap">{{ revision.message|urlize|linebreaksbr }}
                {% endif %}
            <p class="actions">
                {{ revision.score }}
                {% if revision.pending %}
                    <button class="button">üëç Approve</button>
                    <button class="button">‚ò†Ô∏è Disapprove</button>
                {% else %}
                    <button class="button">üëç Thanks</button>
                    <button class="button">‚ò†Ô∏è No</button>
                {% endif %}
        </li>
    {% endfor %}
</ul>
