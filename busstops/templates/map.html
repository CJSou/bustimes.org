{% extends 'page.html' %}

{% block title %}Map – bustimes.org{% endblock %}

{% block head %}
    <meta property="og:title" content="Map – bustimes.org">
    <style>
        body {
            overflow: hidden;
        }

        .wide main {
            max-width: initial;
            padding: 0;
        }

        #hugemap {
            position: absolute;
            top: 56px;  /* header */
            width: 100%;
            bottom: 90px;
        }

        #content {
            height: calc(100vh - 146px);
            margin: 0;
        }
    </style>
{% endblock %}

{% block header %}
   <header class="site-header">
        <a href="/" class="site-name">bustimes.org</a>

        <form method="GET" action="/search" class="search">
            <label>
                Search
                <input name="q" placeholder="Search" type="search" value="{{ query }}" required>
            </label>
            <input type="submit" value="Search">
        </form>
    </header>
{% endblock %}

{% block breadcrumb %}{% endblock %}

{% block content %}
    <div id="hugemap">
        <noscript>Sorry, the map requires JavaScript. You can still use most of the rest of the website.</noscript>
    </div>
{% endblock %}

{% block footer %}
    <script>
        INITIAL_VIEW_STATE = {
        {% if request.headers.cf_ipcountry == "IE" %}
            latitude: 53.45,
            longitude: -7.5,
        {% else %}
            latitude: 54,
            longitude: -2.9,
        {% endif %}
            zoom: 5,
        };
    </script>
{% endblock %}

{% block foot %}
    {% load static %}
    <script>
        OLD_JS = [
            "{% static 'js/dist/bigmap-classic.css' %}",
            "{% static 'js/reqwest.min.js' %}",
            "{% static 'js/dist/bigmap-classic.js' %}"
        ];
        NEW_JS = [
            "{% static 'js/dist/app.css' %}",
            "{% static 'js/dist/app.js' %}",
        ];
    </script>
    <script src="{% static 'js/dist/bigmap.js' %}"></script>
    <link rel="stylesheet" href="/liveries.{{ liveries_css_version }}.css">
{% endblock %}
